var searchPopup=document.querySelector(".search-popup"),hotelSearch=document.querySelector(".hotel-search"),search=document.querySelector(".hotel-search-form"),arrivalDate=document.querySelector("[name=arrival-date]"),departureDate=document.querySelector("[name=departure-date]"),adults=document.querySelector("[name=adults]"),children=document.querySelector("[name=children]"),isStorageSupport=!0,adultsStorage="",childrenStorage="",iframe=document.querySelector(".iframe"),mapImage=document.querySelector(".map-image"),checkOnline=navigator.onLine;1==checkOnline?(iframe.classList.remove("visually-hidden"),mapImage.classList.add("visually-hidden")):(iframe.classList.add("visually-hidden"),mapImage.classList.remove("visually-hidden"));try{adultsStorage=localStorage.getItem("adults"),childrenStorage=localStorage.getItem("children")}catch(e){isStorageSupport=!1}hotelSearch.classList.add("switch-off"),searchPopup.addEventListener("click",function(e){e.preventDefault(),adultsStorage&&(adults.value=adultsStorage),childrenStorage&&(children.value=childrenStorage),hotelSearch.classList.contains("switch-off")?(hotelSearch.classList.remove("switch-off"),hotelSearch.classList.add("switch-on"),arrivalDate.focus()):(hotelSearch.classList.remove("switch-on"),hotelSearch.classList.add("switch-off"),search.classList.remove("modal-error"))}),search.addEventListener("submit",function(e){!(arrivalDate.value&&departureDate.value&&adults.value&&children.value)||10<adults.value||10<children.value||adults.value<=0||children.value<0?(e.preventDefault(),search.classList.remove("modal-error"),search.offsetWidth,search.classList.add("modal-error")):isStorageSupport&&(localStorage.setItem("adults",adults.value),localStorage.setItem("children",children.value))}),window.addEventListener("keydown",function(e){27===e.keyCode&&hotelSearch.classList.contains("switch-on")&&(e.preventDefault(),hotelSearch.classList.remove("switch-on"),hotelSearch.classList.add("switch-off"),search.classList.remove("modal-error"))});